<!DOCTYPE html>
<input id="monthly" type="number" value="10000" />


<label>年化報酬率（%）</label>
<input id="rate" type="number" value="6" />


<label>投資年數</label>
<input id="years" type="number" value="20" />


<button onclick="calculate()">開始試算</button>


<canvas id="chart" height="200" style="margin-top:20px;"></canvas>
<div class="result" id="result"></div>


<footer>
※ 本試算僅為數學模擬，非投資建議
</footer>
</div>


<script>
function calculate() {
const monthly = Number(document.getElementById('monthly').value);
const rate = Number(document.getElementById('rate').value) / 100 / 12;
const years = Number(document.getElementById('years').value);
const months = years * 12;


let futureValue = 0;
const data = [];
for (let i = 0; i < months; i++) {
futureValue = (futureValue + monthly) * (1 + rate);
if ((i + 1) % 12 === 0) {
data.push(Math.round(futureValue));
}
}


const totalInvested = monthly * months;


document.getElementById('result').innerHTML = `
<p><strong>總投入金額：</strong> NT$ ${totalInvested.toLocaleString()}</p>
<p><strong>最終資產預估：</strong> NT$ ${Math.round(futureValue).toLocaleString()}</p>
<p><strong>投資收益：</strong> NT$ ${Math.round(futureValue - totalInvested).toLocaleString()}</p>
`;


drawChart(data);
}


function drawChart(data) {
const canvas = document.getElementById('chart');
const ctx = canvas.getContext('2d');
ctx.clearRect(0, 0, canvas.width, canvas.height);


const max = Math.max(...data);
const padding = 30;
const w = canvas.width - padding * 2;
const h = canvas.height - padding * 2;


ctx.beginPath();
data.forEach((value, index) => {
const x = padding + (w / (data.length - 1)) * index;
const y = padding + h - (value / max) * h;
index === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
});
ctx.strokeStyle = '#2563eb';
ctx.lineWidth = 2;
ctx.stroke();
}


const totalInvested = monthly * months;


document.getElementById('result').innerHTML = `
<p><strong>總投入金額：</strong> NT$ ${totalInvested.toLocaleString()}</p>
<p><strong>最終資產預估：</strong> NT$ ${Math.round(futureValue).toLocaleString()}</p>
<p><strong>投資收益：</strong> NT$ ${Math.round(futureValue - totalInvested).toLocaleString()}</p>
`;
}
</script>
</body>
</html>
