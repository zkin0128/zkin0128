<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ETF 定期定額複利試算｜每月投資報酬計算機</title>
  <link rel="stylesheet" href="style.css">
  <meta name="description"
        content="免費 ETF 定期定額複利試算工具，快速計算每月投資金額、年化報酬率與長期資產成長，適合新手與長期投資者使用。">
  <meta name="keywords"
        content="ETF 定期定額, 複利試算, 投資試算, 每月投資">
</head>
<body onload="calculate()">
  <div class="container">
    <h1>ETF 定期定額複利試算</h1>

    <label>每月投入金額（NTD）</label>
    <input id="monthly" type="number" value="10000">

    <label>年化報酬率（%）</label>
    <input id="rate" type="number" value="6">

    <label>投資年數</label>
    <input id="years" type="number" value="20">

    <button onclick="calculate()">開始試算</button>

    <canvas id="chart" width="600" height="200"></canvas>

    <div class="result" id="result"></div>

    <footer>※ 本試算僅為數學模擬，非投資建議</footer>
  </div>

  <script>
    function calculate() {
  const monthly = Number(document.getElementById('monthly').value);
  const rate = Number(document.getElementById('rate').value) / 100 / 12;
  const years = Number(document.getElementById('years').value);

  if (years <= 0) {
    alert('投資年數需大於 0');
    return;
  }

  const months = years * 12;


      let value = 0;
      const yearly = [];

      for (let i = 1; i <= months; i++) {
        value = (value + monthly) * (1 + rate);
        if (i % 12 === 0) yearly.push(Math.round(value));
      }

      const invested = monthly * months;

      document.getElementById('result').innerHTML = `
        <p><strong>總投入：</strong> NT$ ${invested.toLocaleString()}</p>
        <p><strong>最終資產：</strong> NT$ ${Math.round(value).toLocaleString()}</p>
        <p><strong>投資收益：</strong> NT$ ${Math.round(value - invested).toLocaleString()}</p>
      `;

      drawChart(yearly);
    }

    function drawChart(data) {
      const c = document.getElementById('chart');
      const ctx = c.getContext('2d');
      ctx.clearRect(0, 0, c.width, c.height);

      const max = Math.max(...data);
      const padding = 30;

      ctx.beginPath();
      data.forEach((v, i) => {
        const x = padding + (i / (data.length - 1)) * (c.width - padding * 2);
        const y = c.height - padding - (v / max) * (c.height - padding * 2);
        i === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
      });
      ctx.strokeStyle = '#2563eb';
      ctx.lineWidth = 2;
      ctx.stroke();
    }
  </script>
</body>
</html>
